<!------------------------------------------------------------------------------------------------
* Author: Techila Global Services Pvt Ltd. (Deepak Chouhan)
* Edited: Cloudalyze Services LLP (Saheel Deshpande)
* VF Page Name: Flame_Home
* Created Date: August 02 2018
* Description: home page of customer community
-------------------------------------------------------------------------------------------------->
<apex:page controller="Flame_HomeAC" docType="html-5.0" standardStylesheets="true" lightningStylesheets="true" showHeader="false" sidebar="false" cache="false" title="FLAME University - The Pioneers of Liberal Education in India">
    <apex:includeScript value="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" />
    
   <script>
        var userType ='{!$User.FirstName} {!$User.LastName}';
        console.log('User Type '+userType);
        if(userType=='FLAME Community Site Guest User'){
           //window.open("https://https://my1.flame.edu.in/","_self");          
           window.location.href ='https://my.flame.edu.in/s/login';
        }
    </script>
     
    <apex:slds />
    <c:Flame_HeadResource /> 
    <style>
        .navbar .navbar-nav > .flm_Home > a,
        .navbar .navbar-nav > .flm_Home > a:focus,
         .navbar .navbar-nav > .flm_Home > a:hover 
       {
            color: #fff !important;
          //  background-color: #fbb601 !important; 
            padding-left: 10px;
        }
        .main-slider a table tr td img {
            min-height: 342px;
        }
        
        .latest-news .image-effect {
            min-height: 230px;
            background-color: #084d89;
        }
        .latest-events img {
            min-height: 230px;
        }
        .latest-news a table tr td p {
            margin:0;
        }
        .latest-events a table tr td p {
            margin:0;
        }
        @media (max-width: 769px) {
            .latest-news .image-effect {
                min-height: auto;
            }
            .latest-events {
                min-height: auto;
            }
            .home-carousel h3 {
                font-size: 14px;
                line-height: 18px;
            }
            .main-slider a table tr td img {
                min-height: auto;
            }
        }
        
        /* arrow css */

    .news-section .slider-arrows .carousel-control-next, .news-section .slider-arrows .carousel-control-prev, .events-section .slider-arrows .carousel-control-next, .events-section .slider-arrows .carousel-control-prev{
        width: 5%;
        top: -38%;
    }
        
        .slider-arrows {
            text-align: right;
            margin-top: 20px;
        }
        .slider-arrows a {
            background-color: transparent;
            padding: 0;
            margin: 0;
        }
        .home-carousel {
            width: 100%;
            right: 0;
            left: 0;
            background-color: rgba(0, 0, 0, 0.3);
        }
        .announcements-section p {
            margin-left:0;
        }
        .announcements a:hover {
            text-decoration:none;
        }
        .announcements-section .annou-scroller {
            max-height: 280px;
        }
        .carousel-caption {
            bottom: 0px;
        }
         @media screen and (max-width: 769px) {
             .announcements-section .title {
                 font-size: 20px;
             }
             .news-section .title {
                 font-size: 20px;
             }
             .events-section .title {
                 font-size: 20px;
             }
             .mt-3 {
                 margin-top: 5px !important;
             }
             .carousel-caption {
                padding-top: 10px;
                padding-bottom: 10px;
            }
         }

.events-section, .news-section{
    display:inline-block;
    width:100%;
    margin-bottom: 30px;
}
        
 .events-section .col-lg-12,
 .news-section .col-lg-12{
    position:relative;
 }
.events-section .col-lg-12 .carousel, 
.news-section .col-lg-12 .carousel  {
    position: relative;
}
.events-section .col-lg-12 .carousel .slider-arrows, 
.news-section .col-lg-12 .carousel .slider-arrows {
    position: absolute;
    right: 0;
    width: 60px;
}

.slider-arrows {
    position: absolute;
    width: 100%;
    height: 25px;
    margin: 0;
    top: -50px;
        z-index: 999;
}
.slider-arrows .first_button, 
.slider-arrows .last_button,
.slider-arrows .first_btn, 
.slider-arrows .last_btn{
      width: 70px;
    position: absolute;
    right: 5px ;
    top: 0;
}
.news-section .slider-arrows .carousel-control-next, 
.news-section .slider-arrows .carousel-control-prev, 
.events-section .slider-arrows .carousel-control-next, 
.events-section .slider-arrows .carousel-control-prev {
    display: inline-block !important;
    width: 25px;
    height: 25px;
}
div#NewsDiv, div#EventsDiv {
    display: inline-block;
    width: 100%;
}
.latest-news h3, .latest-events h3 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
        margin-top: 0;
}
.latest-news p, 
.latest-events p {
    display: block;
    display: -webkit-box;
    max-width: 100%;
    height: 72px;
    margin: 0 auto;
    font-size: 14px;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    position: relative;
}
p.readmore_lnk {
    height: auto;
        padding-top: 8px;
}
 .latest-events .latest-events {
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}
@media(min-width:1280px){
    div#right-panel .content {
        padding: 0;
    }
        div#right-panel {
        max-width: 1100px;
    }
}
    </style>
    <body>
       
            <!-- Left Panel -->
            <aside id="left-panel" class="left-panel">
                <c:Flame_SideMenuBar />
            </aside>  
            <!-- Left Panel -->            
            <!-- Right Panel -->            
            <div id="right-panel" class="right-panel">                
                <!-- Header-->
                <c:Flame_HeaderBar />
                <!-- Header--> 
               
                <apex:includeLightning />
                <!-- <div class="content mt-3">
                    <flow:interview name="Sporting"  finishLocation="{!URLFOR('/apex/home.jsp')}"/>
                    
                                    
                </div> --><!-- .content -->
                                      
                <div class="content mt-3" id="flowContainer" >
                    <script>
            var statusChange = function (event) {
            //    if(event.getParam("status") === "FINISHED") {
            //       // Control what happens when the interview finishes
 
            //       var outputVariables = event.getParam("outputVariables");
            //       var key;
            //       for(key in outputVariables) {
            //          if(outputVariables[key].name === "myOutput") {
            //             // Do something with an output variable
            //          }
            //       }
            //    }

                //alert("statusChange called");
                
                document.getElementById('flowContainer').style.border = "1px solid black";
            };
            $Lightning.use("c:sportingflowApp", function() {
               // Create the flow component and set the onstatuschange attribute
               $Lightning.createComponent("lightning:flow", {"onstatuschange":statusChange},
                  "flowContainer",
                  function (component) {
                     // Set the input variables
                    //  var inputVariables = [
                    //     {
                    //        name : 'myInput',
                    //        type : 'String',
                    //        value : "Hello, world"
                    //     }
                    //  ];
                     
                     // Start an interview in the flowContainer div, and 
                     // initializes the input variables.
                     component.startFlow("Sporting");
                  }
               );
            });
         </script>
                </div>
                 
                
            </div><!-- /#right-panel -->    
      
            <!-- Right Panel -->
              
        <c:Flame_FooterResource />
         
         <script>
    jQuery(document).ready(function($) {
                   
        !function(t){t.fn.bcSwipe=function(e){var n={threshold:50};return e&&t.extend(n,e),this.each(function(){function e(t){1==t.touches.length&&(u=t.touches[0].pageX,c=!0,this.addEventListener("touchmove",o,!1))}function o(e){if(c){var o=e.touches[0].pageX,i=u-o;Math.abs(i)>=n.threshold&&(h(),t(this).carousel(i>0?"next":"prev"))}}function h(){this.removeEventListener("touchmove",o),u=null,c=!1}var u,c=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",e,!1)}),this}}(jQuery);
                         
        // Swipe functions for Bootstrap Carousel
        jQuery('.carousel').bcSwipe({ threshold: 50 }); 

        // To add first, second and last class to item
        jQuery('#carouselExample.carousel').each(
          function() {
            var a = jQuery('.carousel-item', $(this)).length;
            var b= a-3;
           $("#carouselExample.carousel div.carousel-item:nth-child("+b+")").addClass("last"); 
           $("#carouselExample.carousel div.carousel-item").first().addClass("first active");
           $("#carouselExample.carousel div.carousel-item:nth-child("+2+")").addClass("second"); 
           $("#carouselExample.carousel div.carousel-item").last().addClass("last");      
          }
        );

        // To add first, second and last class to item
        jQuery('#carouselExample2.carousel').each(
          function() {
            var a = jQuery('.carousel-item', $(this)).length;
            var b= a-3;
           $("#carouselExample2.carousel div.carousel-item:nth-child("+b+")").addClass("last");  
           $("#carouselExample2.carousel div.carousel-item").first().addClass("first active");
           $("#carouselExample2.carousel div.carousel-item:nth-child("+2+")").addClass("second"); 
           $("#carouselExample2.carousel div.carousel-item").last().addClass("last");       
          }
        );
        
        // check if first active and then hide pre arrow
         if ( $('#carouselExample.carousel div.carousel-item.first').hasClass('active') ) {         
           $("#carouselExample div.slider-arrows a.first_button").css({"pointer-events": "none", "display": "none"});
         } 

         if ( $('#carouselExample2.carousel div.carousel-item.first').hasClass('active') ) {            
           $("#carouselExample2 div.slider-arrows a.first_btn").css({"pointer-events": "none", "display": "none"});
         } 
         
         
        // check last_button active and hide next
         $(".last_button").click(function(){

             if($('#carouselExample.carousel div.carousel-item.last').hasClass('active') ) 
            {
               $("#carouselExample div.slider-arrows a.last_button").css({"pointer-events": "none", "display": "none"});  
               $('head').append('<style type="text/css">@media screen and (max-width: 767px){ #carouselExample div.slider-arrows a.last_button { pointer-events: auto !important}}</style>');     
            }          

             if($('#carouselExample div.slider-arrows a.first_button').css('pointer-events') === 'none')
            {
                $("#carouselExample div.slider-arrows a.first_button").css({"pointer-events": "auto", "display": "flex"});             
            }
    
        });

         // check first_button active and hide pre
        $(".first_button").click(function(){   

            if ( $('#carouselExample.carousel div.carousel-item.second').hasClass('active') ) 
            {           
               $("#carouselExample div.slider-arrows a.first_button").css({"pointer-events": "none", "display": "none"});
               $('head').append('<style type="text/css">@media screen and (max-width: 767px){ #carouselExample div.slider-arrows a.first_button { pointer-events: auto !important}}</style>'); 
            } 
            
            if($('#carouselExample div.slider-arrows a.last_button').css('pointer-events') === 'none')
            {
                $("#carouselExample div.slider-arrows a.last_button").css({"pointer-events": "auto", "display": "flex"});               
            }
          
          });

         // check last_btn active and hide next
         $(".last_btn").click(function(){

             if($('#carouselExample2.carousel div.carousel-item.last').hasClass('active') ) 
             {
                $("#carouselExample2 div.slider-arrows a.last_btn").css({"pointer-events": "none", "display": "none"}); 
                 $('head').append('<style type="text/css">@media screen and (max-width: 767px){ #carouselExample2 div.slider-arrows a.last_btn { pointer-events: auto !important}}</style>');          
             }      

            if($('#carouselExample2 div.slider-arrows a.first_btn').css('pointer-events') === 'none')
            {
                $("#carouselExample2 div.slider-arrows a.first_btn").css({"pointer-events": "auto", "display": "flex"});
            }       
        });

        // check first_btn active and hide pre
         $(".first_btn").click(function(){   


            if ( $('#carouselExample2.carousel div.carousel-item.second').hasClass('active') ) 
            {       
               $("#carouselExample2 div.slider-arrows a.first_btn").css({"pointer-events": "none", "display": "none"});
                $('head').append('<style type="text/css">@media screen and (max-width: 767px){ #carouselExample2 div.slider-arrows a.first_btn { pointer-events: auto !important}}</style>'); 
            } 

            if($('#carouselExample2 div.slider-arrows a.last_btn').css('pointer-events') === 'none')
            {
                $("#carouselExample2 div.slider-arrows a.last_btn").css({"pointer-events": "auto", "display": "flex"});
            }
          
          });       
        
     });

    </script>

        <script>
        $(document).ready(function(){
            setImgHeight('NewsDiv');
            setImgHeight('EventsDiv');        
            setImgAnnouncementHeight('AnnouncementDiv');
            
            //-- add active class in carousel
            $('.announcement_citem:first-child').addClass('active');
            $('.news_citem:first-child').addClass('active');
            $('.events_citem:first-child').addClass('active');
            
            //-- slider jqeury
            
        });
        
        //-- set height and width of image
        function setImgHeight(ele){    
            var div_Id = document.getElementById(ele);
            var allImg = div_Id.getElementsByTagName("img");
            for(i = 0; i < allImg.length; i++) {
                allImg[i].style.maxHeight= 230+'px';
                allImg[i].style.height = 'auto';
                allImg[i].style.width = 100+'%';
            }
        }
        function setImgAnnouncementHeight(ele){    
            var div_Id = document.getElementById(ele);
            var allImg = div_Id.getElementsByTagName("img");
            for(i = 0; i < allImg.length; i++) {
                allImg[i].style.maxHeight= 342+'px';
                allImg[i].style.height = 'auto';
                allImg[i].style.width = 100+'%';
            }
        }        
        //-- slider jquery
        </script>
    </body>
    <script type="text/javascript">
        $(document).ready(function(){
           $(".flm_home_ele").addClass("active");
        });
    </script>  
</apex:page>