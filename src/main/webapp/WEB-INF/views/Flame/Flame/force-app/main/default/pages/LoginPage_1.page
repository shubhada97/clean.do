<apex:page id="Registration" showHeader="false" controller="FUA_Login_Page_Controller" standardStylesheets="false"  doctype="HTML-5.0" cache="false" action="{!LandingPage}" title="Login Page">
   <script>
        var userType ='{!$User.FirstName} {!$User.LastName}';
        console.log('User Type '+userType);
        if(userType=='FLAME Community Site Guest User'){
           //window.open("https://https://my1.flame.edu.in/","_self");          
           window.location.href ='https://application.flame.edu.in/s/login_1';
        }
    </script>
   
   <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
   <apex:stylesheet value="{!URLFOR($Resource.flameZip, 'css/bootstrap.min.css')}" />
   <apex:stylesheet value="{!URLFOR($Resource.flameZip, 'css/font-awesome.min.css')}" />
   <apex:stylesheet value="{!URLFOR($Resource.flameZip, 'css/main.css')}" />
   <head> 
    <!--old one-----> 
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MZNSQ3W');</script>
    <!-- End Google Tag Manager -->
    
    <!----- new one added on 28012021 for PGPEI program code received from Pranav ---->
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-N6V423B');</script>
<!-- End Google Tag Manager -->
</head>

<body>
<!--old one-----> 
<!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MZNSQ3W"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

<!----- new one added on 28012021 for PGPEI program code received from Pranav ---->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6V423B"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->




    <div class="login-sec">
       <div class="container">       
       <div class="login-top">
            <div class="flam-logo"><a href="javascript:void(0)">  <apex:image url="{!URLFOR($Resource.flameZip, 'img/logo.png')}"/></a></div>
            <div class="login-form">
                <h3>Registered Already?</h3>
                <apex:form id="Login_form">
                  
                  <apex:messages id="msg1" styleClass="errorMsg" rendered="{!ErrorLogin}"/> 
                   
                    <div class="row">
                        <div class="col-sm-5">
                            <div class="form-group">
                                <apex:inputText value="{!LoginUsername}" styleClass="form-control" html-placeholder="Username" tabIndex="1"/>
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-group">
                                <apex:inputSecret value="{!LoginPassword}"  styleClass="form-control" html-placeholder="Password" tabIndex="2"/>                               
                               
                                <apex:commandLink action="{!ForgotPass}" styleClass="forgot-link" value="Forgot Password?" tabIndex="4"/>                               
                            </div>
                        </div>
                        <div class="col-sm-2 submit-btn">
                            <div class="form-group">                               
                                <apex:commandButton action="{!Login}" styleClass="btn go-btn" value="Login" image="{!URLFOR($Resource.flameZip, 'img/arrow.png')}" rerender="Login_form" tabIndex="3"/>
                            </div>
                        </div>
                    </div>
                </apex:form>
            </div>
        </div>
        
       
        <div class="sign-up-sec">
            <div class="outer">
                <div class="adv-box"></div>
                <div class="sign-up-box ct-form">
                    <h3>Don&#39;t have an account? <strong>Register to apply</strong></h3>
                    <apex:form id="theForm2">
                                                           
                       <div class="half-row">
                        <div class="half">
                            <div class="form-group row">
                                <div class="col-sm-6" id="firstName">
                                    <div class="input-label"><label>First Name <span class="astrick">*</span></label></div>
                                    <div class="input-text">
                                        <apex:inputField value="{!Conn.FirstName}" styleClass="form-control"/>
                                    </div>
                                    <span class="fnMsg errorMsg"></span>
                                </div>
                                <div class="col-sm-6" id="lastName">
                                    <div class="input-label"><label>Last Name <span class="astrick">*</span></label></div>
                                    <div class="input-text hide-msg">
                                       <apex:inputText value="{!Conn.LastName}" styleClass="form-control" />
                                    </div>
                                    <span class="lnMsg errorMsg"></span>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-6" id="rd_country">
                                    <div class="input-label"><label>Country <span class="astrick">*</span></label></div>
                                    <div class="input-text">
                                    <apex:inputField value="{!Conn.FU_Applicant_Other_Country__c}" styleClass="form-control"  id="accountStatus"/>    
                                    </div>
                                    <span class="cMsg errorMsg"></span>
                                </div>
                                     <!--- to set a picklist default value -->
  
                                        <script>
                                        document.querySelector('[id$=accountStatus]').value = 'India';
                                        </script>
                               
                               
                                <div class="col-sm-6" id="rd_state">
                                    <div class="input-label"><label>State <span class="astrick">*</span></label></div>
                                    <div class="input-text">
                                        <apex:inputField value="{!Conn.FU_Applicant_Other_State__c}" styleClass="form-control" onchange="clearOtherCity();" />       
                                    </div>
                                    <span class="stMsg errorMsg"></span>
                                </div>
                            
                            </div>
                            
                            <div class="form-group row">
                                <div class="col-sm-12" id="rd_city">
                                    <div class="input-label"><label>City <span class="astrick">*</span></label></div>
                                    <div class="input-text">
                                       <apex:inputField value="{!Conn.FU_Applicant_Other_City__c}" styleClass="form-control" />
                                    </div>
                                    <span class="ctMsg errorMsg"></span>
                                </div>
                            </div>
                            
                              <div class="form-group row hide">
                                <div class="col-sm-12" id="rd_Ocity">
                                    <div class="input-label"><label>Other City <span class="astrick">*</span></label></div>
                                    <div class="input-text">
                                       <apex:inputField value="{!Conn.Other_City__c}" styleClass="form-control" />
                                    </div>
                                    <span class="OctMsg errorMsg"></span>
                                </div>
                            </div>
                            
                            <div class="form-group row">
                                <div class="col-sm-12"><div class="input-label"><label>Mobile number <span class="astrick">*</span></label></div></div>
                                <div class="col-sm-6 col-xs-6" id="rd_mobile_first">                                   
                                    <div class="input-text">
                                        <apex:inputfield value="{!Conn.FU_Mobile_Phone_Code__c}" styleClass="form-control"  id="phone"/>
                                    </div> 
                                    <span class="mobfrMsg errorMsg"></span>                     
                                </div>
                                <!--- to set a picklist default value -->
                                 <script>
                                        document.querySelector('[id$=phone]').value = 'India(+91)';
                                        </script>
                                
                                <div class="col-sm-6 col-xs-6" id="rd_mobile">
                                    <div class="input-text">
                                        <apex:inputField value="{!Conn.FUA_Mobile__c}" styleClass="form-control" />
                                    </div>
                                    <span class="mobMsg errorMsg"></span>
                                </div>
                            </div>
                                                                                  
                            <div class="form-group row">
                                <div class="col-sm-12" id="rd_prg">
                                    <div class="input-label"><label>Program interested in <span class="astrick">*</span></label></div>
                                        <div class="input-text">
                                            <apex:selectList value="{!program}" size="1" >
                                                <apex:selectOption itemValue="" itemLabel="Select the Program" />
                                                <apex:selectOptions value="{!Programs}" />
                                            </apex:selectList>
                                        </div>
                                        <span class="prMsg errorMsg"></span>
                               </div>
                           </div>
                                                       
                            </div>
                            <div class="half">
                                <div class="form-group row">
                                    <div class="col-sm-12" id="rd_email">
                                    <apex:messages />
                                        <apex:messages id="InvalidData" styleClass="errorMsg try" rendered="!{!ErrorLogin}"/>   
                                        <div class="input-label"><label>Email <span class="astrick">*</span></label></div>                                                                                
                                        <div class="input-text">
                                        <apex:inputText required="true" id="email" value="{!email}" styleClass="form-control" /> 
                                    </div>  
                                    <span class="emMsg errorMsg"></span>                                 
                                </div>
                            </div>                          
                            <div class="form-group row">
                                <div class="col-sm-12" id="rd_pwd"> 
                                    <div class="input-label"><label>Password <span class="astrick">*</span></label></div>
                                    <div class="input-text overflow">
                                        <div class="media2">
                
                                            <div class="media-body2 ct-tooltip"  data-tooltip="Password must contain atleast 8 characters along with a number.">
                                                <apex:inputSecret required="true" id="password" value="{!password}" styleClass="form-control" /> 
                                            </div>
                                        </div>
                                    </div>
                                    <span class="pwMsg errorMsg"></span> 
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-12" id="rd_rePwd">
                                    <div class="input-label"><label>Re-enter Password <span class="astrick">*</span></label></div>
                                    <div class="input-text">
                                    <apex:inputSecret required="true" id="confirmPassword" value="{!confirmPassword}" styleClass="form-control" />
                                    </div>
                                    <span class="rePwMsg errorMsg"></span> 
                                </div>
                            </div>
                            
                            <div class="form-buttons" id="signUp">
                                <div class="input-label"><label>&nbsp;</label></div>
                                <apex:commandButton onclick="if(valid()==false){return false;};" action="{!RegisterUser}" oncomplete="showOtherCity()"
                                value="Sign up" rerender="theForm2" styleclass="btn save-btn"/> <!--onclick="if(valid()==false){return false;}" action="{!registerUser}" -->                               
                            </div>
                        </div>
                    </div>
                    </apex:form>
                </div>
            </div>
        </div>              
        
        
      </div> 
                  <div class="footer">
                        <div class="container">
                            <div class="row">
                                    <p>© FLAME University 2020.
                                        <span></span> All Rights Reserved.
                                    </p>
                            </div>        
                        </div>
                  </div> 
      </div>  
      <apex:includeScript value="{!URLFOR($Resource.flameZip, 'js/jquery.js')}"/> 
<script>
    function clearOtherCity(){
        
        $('#rd_Ocity input[type="text"]').val('');
        $('#rd_Ocity').parent().addClass('hide');
        $('#rd_city select').val('');
    }
     function showOtherCity()
     {
       var a = $('#rd_Ocity input[type="text"]').val(); 
       if(a != '')
       {
          $('#rd_Ocity').parent().removeClass('hide');  
       } 
     }
     
      $(document).on('change','#rd_country select',function(){
        var c = $(this).val();
        if(c=="India"){          
            $('#rd_Ocity').parent().addClass('hide');
            $('#rd_Ocity input[type="text"]').val('');
        }else{
             $('#rd_Ocity input[type="text"]').val('');
             $('.OctMsg').text('');
             $('#rd_Ocity').parent().removeClass('hide');
        }
        });
        
        $(document).on('change','#rd_city select',function(){
        var c = $(this).val();
        if(c=="Other"){
            $('#rd_Ocity input[type="text"]').val('');
            $('.OctMsg').text('');
            $('#rd_Ocity').parent().removeClass('hide');
        }else{
              $('#rd_Ocity input[type="text"]').val('');
             $('#rd_Ocity').parent().addClass('hide');
        }
        });
        
      function valid(){
         var counter=0;   
         var a=$('#firstName input[type="text"]').val();
        if(a==""){
             $('.fnMsg').text('First name required.');
           counter++;
         }else{
             $('.fnMsg').text('');
         } 
         var b=$('#lastName input[type="text"]').val(); 
         if(b==""){
             $('.lnMsg').text('Last name required.');
           counter++;
         }else{
             $('.lnMsg').text('');
         } 
         
         var c=$('#rd_country select').val(); 
         if(c==""){
             $('.cMsg').text('Country is required.');
           counter++;
         }else{
             $('.cMsg').text('');
         }
         
         
         var d=$('#rd_state select').val(); 
         if(d==""){
             $('.stMsg').text('State is required.');
           counter++;
         }else{
             $('.stMsg').text('');
         }
         if(c!=="" && d!==""){
             var p=$('#rd_city select').val();
             if(p=="" || p=="__"){
                 $('.ctMsg').text('City is required.');
                 counter++;
             }else{
                $('.ctMsg').text('');
             }
        }else{
            $('.ctMsg').text('');
         }
         
      /*   var e=$('#rd_otherCity select').val(); 
         if(e==""){
             $('.ctMsg').text('City is required.');
           counter++;
         }else{
             $('.ctMsg').text('');
         }*/
         if(c!=="India"){             
             var j=$('#rd_Ocity input[type="text"]').val(); 
             if(j=="" || j==undefined){
                 $('.OctMsg').text('Other City is required.');
                 counter++;
             }else{
                 $('.OctMsg').text('');
             }
         }
         
         var it=$('#rd_city select').val();
         if(it=="Other"){
           var tt=$('#rd_Ocity input[type="text"]').val();
           if(tt=="" || tt==undefined){
              $('.OctMsg').text('Other City is required.');
               counter++;
           }else{
               $('.OctMsg').text('');
           }  
         }
         
         var f=$('#rd_mobile_first select').val(); 
         if(f==""){
             $('.mobfrMsg').text('Country code is required.');
           counter++;
         }else{
             $('.mobfrMsg').text('');
         }
         
         var g=$('#rd_mobile input[type="text"]').val();
         if(g==""){
             $('.mobMsg').text('Mobile Number is required.');
           counter++;
         }else{
             $('.mobMsg').text('');
             if(g.length > 10){
                $('.mobMsg').text('Mobile Number should be 10 digits.');
                counter++;
             }
             if(g.length < 10){
                $('.mobMsg').text('Mobile Number should be 10 digits.');
                counter++;
             }
         }
         
         var h=$('#rd_prg select').val(); 
         if(h==""){
             $('.prMsg').text('Program interested is required.');
           counter++;
         }else{
             $('.prMsg').text('');
         }
         
      var i=$('#rd_email input[type="text"]').val(); 
         if(i==""){
             $('.emMsg').text('Email is required.');
           counter++;
         }else{
             /*  var ab = emailValidation(i);
            if(ab){
                 $('.emMsg').text('');
             }else{
                  $('.emMsg').text('Enter valid Email.');
                  return false;
             }
            $('.emMsg').text(''); 
          */
          $('.emMsg').text(''); 
        }
        var j=$('#rd_pwd input[type="password"]').val(); 
         if(j==""){            
             $('.pwMsg').text('Password is required.');             
           counter++;
         }else{
         
            /* if(j.length<8){
                 $('.pwMsg').text('Your password must be at least 8 characters long with a number.');
                 return false;
             }
         
            var numb = j.match(/\d/g);
           
            if(numb.length==0 || numb.length==8){
                $('.pwMsg').text('Your password must have a mix of letters and numbers'); 
                return false;
            }*/
             $('.pwMsg').text('');
         }
         
         var k=$('#rd_rePwd input[type="password"]').val(); 
         if(k==""){
             $('.rePwMsg').text('Re-enter Password is required.');
          counter++;
         }else{
             if(k==j){
               $('.rePwMsg').text('');  
             }else{
               $('.rePwMsg').text('Re-entered password does not match with password.'); 
               counter++;  
             }
             
         } 

         if(counter>0){
            return false;
         }
         return true;
      }
      function emailValidation(em) {
        intRegex = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
        var emailflag = intRegex.test(em);
        if (!emailflag) {
           return false;
        }else{
            return true;
        }
    };
     $(document).on('keyup','#rd_mobile input[type="text"]', numberOnly);
    function numberOnly(current) {
        this.value = this.value.replace(/[^0-9.]/g, '').substring(0,10);
    }
    function charLimit(e){
        this.value=this.value.substring(0,80);
    }
     function emailCharlimit(e){
        this.value=this.value.substring(0,70);
    }
    $(document).on('keyup','#firstName input[type="text"]',charLimit);
    $(document).on('keyup','#lastName input[type="text"]',charLimit);    
    $(document).on('keyup','#rd_email input[type="text"]',emailCharlimit);
   
      </script>
      </body>
   </apex:page>